:root { --max: 1200px; }
* { box-sizing: border-box; }
body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, sans-serif; color: #0c0c0d; background: #fff; }

/* --- Dark mode overrides --- */
body.bg-dark, .bg-dark {
  background: #181a1b !important;
  color: #fff !important;
}
.bg-dark .card {
  background: #222e3a !important;
  color: #fff !important;
  border-color: #222e3a !important;
}
.bg-dark .alert-warning {
  background: #0d6efd !important;
  color: #0d6efd !important;
  border-color: #0d6efd !important;
}
.text-light, .bg-dark .text-light, .bg-dark .text-white {
  color: #fff !important;
}
.bg-dark .text-muted, .bg-dark .text-secondary {
  color: rgba(255,255,255,0.5) !important;
}
.bg-dark .nav-tabs .nav-link.active {
  background: transparent !important;
  color: #fff !important;
  border-bottom: 2px solid #fff !important;
}
.bg-dark .nav-tabs .nav-link {
  color: #fff !important;
}
.bg-dark .btn-primary, .bg-dark .btn-outline-primary {
  background: transparent !important;
  color: #fff !important;
  border-color: #fff !important;
}
.bg-dark .btn-primary:hover, .bg-dark .btn-outline-primary:hover {
  background: rgba(255,255,255,j0.1) !important;
  color: #fff !important;
}
.bg-dark .card, .bg-dark .alert-warning {
  background: #232526 !important;
  color: #fff !important;
  border-color: #232526 !important;
}

header { position: sticky; top: 0; background: rgba(255,255,255,.9); backdrop-filter: blur(6px); border-bottom: 1px solid #eee; }
.container { max-width: var(--max); margin: 0 auto; padding: 12px 16px; }
h1 { font-size: 20px; margin: 0; font-weight: 700; letter-spacing: .2px; }
.grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
@media (max-width: 1100px){ .grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 720px){ .grid { grid-template-columns: 1fr; } }

.card { padding: 16px; border: 1px solid #eee; border-radius: 12px; }
.card h3 { font-size: 18px; margin: 0 0 6px; line-height: 1.25; }
.card p {
  margin: 8px 0;
  line-height: 1.5;
  display: -webkit-box;
  -webkit-line-clamp: 60; /* Show up to 60 words in summary */
  line-clamp: 60; /* Standard property for compatibility */
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
  word-break: break-word;
  max-height: calc(1.5em * 60); /* Approximate 60 words */
}
.meta { font-size: 12px; color: #555; display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
.badge { display: inline-block; font-size: 11px; border: 1px solid #ddd; padding: 2px 8px; border-radius: 999px; }
.toast { position: fixed; bottom: 16px; right: 16px; background: #111; color: #fff; padding: 10px 14px; border-radius: 10px; opacity: 0.95; }

/* Preferences modal styles */
.bg-opacity-30 {
  background-color: rgba(0,0,0,0.3);
}

.fixed.inset-0 {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
}

.max-h-32 {
  max-height: 8rem;
}

.overflow-y-auto {
  overflow-y: auto;
}

.z-50 {
  z-index: 50;
}

/* Newspaper fold animation styles */
.fold-stage {
  position: relative;
  perspective: 1000px;
  will-change: transform, opacity;
}
.fold-content {
  transition: opacity 0.2s linear;
}
.fold-out .fold-content {
  animation: foldOutTop 0.22s cubic-bezier(.77,.2,.32,1) forwards, foldOutBottom 0.22s cubic-bezier(.77,.2,.32,1) forwards;
  opacity: 0;
}
.fold-in .fold-content {
  animation: foldInTop 0.22s cubic-bezier(.77,.2,.32,1) forwards, foldInBottom 0.22s cubic-bezier(.77,.2,.32,1) forwards;
  opacity: 1;
}
@keyframes foldOutTop {
  0% { transform: rotateX(0deg) translateY(0); opacity: 1; }
  100% { transform: rotateX(-15deg) translateY(-12px); opacity: 0; }
}
@keyframes foldOutBottom {
  0% { transform: rotateX(0deg) translateY(0); opacity: 1; }
  100% { transform: rotateX(15deg) translateY(12px); opacity: 0; }
}
@keyframes foldInTop {
  0% { transform: rotateX(-15deg) translateY(-12px); opacity: 0; }
  100% { transform: rotateX(0deg) translateY(0); opacity: 1; }
}
@keyframes foldInBottom {
  0% { transform: rotateX(15deg) translateY(12px); opacity: 0; }
  100% { transform: rotateX(0deg) translateY(0); opacity: 1; }
}
@media (prefers-reduced-motion: reduce) {
  .fold-stage, .fold-content, .fold-out .fold-content, .fold-in .fold-content {
    animation: none !important;
    transition: none !important;
  }
}

.bg-modal-light {
  background: #fff !important;
}
.bg-modal-dark {
  background: #232526 !important;
}